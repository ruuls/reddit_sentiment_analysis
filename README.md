
# Reddit Sentiment Analysis for Clinical Trials

## Project Overview

This project involves scraping Reddit data from specific subreddits related to clinical trials, performing sentiment analysis on the collected comments, and using OpenAI's GPT-3.5 to generate personalized messages aimed at encouraging participation in clinical trials.

## Setup Instructions

### 1. Clone the Repository

First, clone the repository to your local machine:

```bash
git clone https://github.com/ruuls/reddit_sentiment_analysis.git
cd reddit_sentiment_analysis
```

### 2. Set Up Environment Variables

Create a `.env` file in the `config/` directory with the following content:

```env
OPENAI_API_KEY=your_openai_api_key_here
```

Make sure to replace `your_openai_api_key_here` with your actual OpenAI API key.

### 3. Install Dependencies

Ensure you have Python 3.7 or above installed. Install the required Python packages using:

```bash
pip install -r requirements.txt
```

### 4. Run the Script

To run the entire pipeline, including data scraping, sentiment analysis, and message generation, execute:

```bash
python src/main.py
```

The output will be a CSV file (`personalized_messages.csv`) in the `data/` directory containing the personalized messages generated for each comment.

## Methodology

### Data Collection

We used `praw`, a Python wrapper for the Reddit API, to scrape data from selected subreddits related to clinical trials and medical research. The scraping focused on posts and comments containing specific keywords relevant to clinical trials.

### Sentiment Analysis

The sentiment analysis was conducted using a pre-trained BERTweet model (`finiteautomata/bertweet-base-sentiment-analysis`) from Hugging Face. The model classifies each comment into three sentiment categories: Positive, Neutral, and Negative.

### Message Generation

For each comment, a prompt was created and sent to OpenAI's GPT-3.5 model to generate a personalized message. The message content was tailored based on the sentiment of the comment, encouraging participation in the clinical trial with appropriate tone and content.

### Challenges Faced

- **Rate Limiting:** Handling Reddit API's rate limits during data scraping required careful management of request timing.
- **Tokenization Issues:** Ensuring that comments were correctly tokenized and processed by the sentiment analysis model was crucial, particularly when dealing with long comments.
- **Authentication Management:** Implementing secure and reliable authentication methods for both Reddit API and OpenAI API was essential for smooth operation.

## Examples

### Data Collected

Here is an example of the data collected from Reddit:

| Subreddit       | Category | Post_ID | Post_Author | Post_Title            | Comment_Created_UTC | Sentiment |
|-----------------|----------|---------|-------------|-----------------------|---------------------|-----------|
| clinicaltrials  | hot      | abc123  | user1       | "New trial for cancer"| 1623456789          | Positive  |

### Analysis Performed

The sentiment analysis output example:

```plaintext
Comment: "I think this trial could really help a lot of people."
Sentiment: Positive
```

### Messages Generated

Example of a personalized message generated by the OpenAI model:

```plaintext
"It’s fantastic to see your enthusiasm! We're thrilled to share that there is a clinical trial happening at Virginia Tech, Moss Arts Center, and based on your positive outlook, we believe you would be a perfect fit. Your involvement could make a significant impact, and we'd love for you to consider joining us."
```

## Ethical Considerations

### Privacy

We ensured that no personally identifiable information (PII) was collected or stored during the data scraping process. Usernames were anonymized where possible, and all data handling complied with Reddit’s API terms of service.

### Bias in Sentiment Analysis

Recognizing that pre-trained models might carry biases from the data they were trained on, we took care to interpret sentiment analysis results within a broader context and not rely solely on automated classification for important decisions.

### Responsible AI Usage

When using OpenAI's GPT-3.5 for generating messages, we ensured that the content was encouraging and positive, without making false promises or overstating the benefits of participation in clinical trials. The messages were crafted to be informative, respectful, and aligned with ethical standards in clinical communications.

## Conclusion

This project provides a comprehensive solution for engaging Reddit users in clinical trials through data-driven sentiment analysis and personalized messaging. By leveraging advanced AI technologies responsibly, we aim to enhance outreach and participation in crucial medical research.
